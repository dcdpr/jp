when:
  path: /api/v1/chat/completions
  method: POST
  json_body_str: >-
    {
      "model": "x-ai/grok-code-fast-1",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "Test message"
            }
          ]
        }
      ],
      "reasoning": {
        "exclude": false,
        "effort": "low"
      },
      "stream": true
    }
then:
  status: 200
  header:
    - name: content-type
      value: text/event-stream
  body: |+
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":""},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    : OPENROUTER PROCESSING
    
    : OPENROUTER PROCESSING
    
    : OPENROUTER PROCESSING
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"","reasoning":null,"reasoning_details":[{"type":"reasoning.encrypted","data":"v/t83UqW7jgPVltGSZBBNIhzLy4aWtJCovdiXEk79thMX3uJIy8ltACJhyxpFZlGzcTr+SnFZWIZ21MUabMcbQlfmePqcakLbenD/hjUOkVGSINdunq+xnmTJ8mW4vlh6/nPUk/CP2TVeShIGzm+XViMcrjozbWL/QsDPEKI8yNDfJE1YqN2Efjpm9/fuZ4mQiNP/v8kH7GREN4BA5i7yNci4NSACBC/XD76zmhfUD/3H4w2Woi88Qp5TE5WvD1p5yic77o+S5EzZee+ZyboBtP9ECLJ7sLEPkcsT4B1LwjOUWINcSFUWUVeuxxz7z/mIDjxqWqzWSHux+LqblB+uLQT3E9EPyPBbOIcllIEzG6UbnArClLjjICvuqbxnKTCwkPN1BsnG2KUIKxKo46y4U0ZQi5dDYqIPHDMtgc08joGLpcGp38ejK2IBRO8qaMZ8+HPdc/yCHbDZTA1IgdCNX4wLs3GayVi2MXAcppaJH+bcAnMGmfPXAucaplksMEp/WNDvMou4kr2jCsFt6t6CvNM2wnA2lbhtjjYKocfYMkqplktxMKIq+tZnvs2WUagz7CD+UbO512NmG/uJp2LelTmYR/OMBZxghYf89dYxpZvHWXj3/rpKuMXY6NHN36sCdPrvbZIVrOPWiX5DNYNBphbnCbOYF+c2LhMkLlUZdLEvMMSVWza/BVXwdyk+PRgn1ZyhQOEdebMpBAXjU+h6NBtLxfdUfVDWEmtRKMqjj6tmBPACBGb71gmveJXPYUsAe/reX93S4xM44JKil48j06pe8nsvVJ+BBvc5qdi7jM7FFPhsrM3Qnv1LOuVYIkbgCBUt+zS8zKyIGDOjRdUV7EZPgHp0TPCItIYBAwCU/kpyyqvGhi1571zPBmXS+EIPxrwdx/GzfIDP/wLhS1DwswCax4Z","id":"rs_11955933-b959-c1af-af62-12ac38302789","format":"xai-responses-v1","index":0}]},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"Test"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" acknowledged"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"."},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" Ready"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" for"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" the"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" real"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" questions"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"?"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" Fire"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" away"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"!"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":" "},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"ðŸš€"},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":""},"finish_reason":"stop","native_finish_reason":"completed","logprobs":null}]}
    
    data: {"id":"gen-1771419293-Zs4d4snJxukpzmZxGZJL","provider":"xAI","model":"x-ai/grok-code-fast-1","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":""},"finish_reason":null,"native_finish_reason":null,"logprobs":null}],"usage":{"prompt_tokens":206,"completion_tokens":152,"total_tokens":358,"cost":0.00023464,"is_byok":false,"prompt_tokens_details":{"cached_tokens":192},"cost_details":{"upstream_inference_cost":0.00023464,"upstream_inference_prompt_cost":0.00000664,"upstream_inference_completions_cost":0.000228},"completion_tokens_details":{"reasoning_tokens":138}}}
    
    data: [DONE]
    
