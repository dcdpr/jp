when:
  path: /api/v1/chat/completions
  method: POST
  json_body_str: >-
    {
      "model": "google/gemini-2.5-flash",
      "messages": [
        {
          "role": "user",
          "content": [
            {
              "type": "text",
              "text": "Test message"
            }
          ]
        }
      ],
      "reasoning": {
        "exclude": false,
        "effort": "low"
      },
      "stream": true
    }
then:
  status: 200
  header:
    - name: content-type
      value: text/event-stream
  body: |+
    : OPENROUTER PROCESSING
    
    : OPENROUTER PROCESSING
    
    : OPENROUTER PROCESSING
    
    data: {"id":"gen-1771419293-YpbsldkB78tELisUYDRP","provider":"Google","model":"google/gemini-2.5-flash","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"Understood! I received your test message.\n\nHow can I help you?","reasoning":null,"reasoning_details":[],"annotations":[]},"finish_reason":null,"native_finish_reason":null,"logprobs":null}]}
    
    : OPENROUTER PROCESSING
    
    : OPENROUTER PROCESSING
    
    data: {"id":"gen-1771419293-YpbsldkB78tELisUYDRP","provider":"Google","model":"google/gemini-2.5-flash","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":"","reasoning":null,"reasoning_details":[],"annotations":[]},"finish_reason":"stop","native_finish_reason":"STOP","logprobs":null}]}
    
    data: {"id":"gen-1771419293-YpbsldkB78tELisUYDRP","provider":"Google","model":"google/gemini-2.5-flash","object":"chat.completion.chunk","created":1771419293,"choices":[{"index":0,"delta":{"role":"assistant","content":""},"finish_reason":null,"native_finish_reason":null,"logprobs":null}],"usage":{"prompt_tokens":2,"completion_tokens":38,"total_tokens":40,"cost":0.0000956,"is_byok":false,"prompt_tokens_details":{"cached_tokens":0,"cache_write_tokens":0,"audio_tokens":0,"video_tokens":0},"cost_details":{"upstream_inference_cost":0.0000956,"upstream_inference_prompt_cost":6e-7,"upstream_inference_completions_cost":0.000095},"completion_tokens_details":{"reasoning_tokens":22,"image_tokens":0}}}
    
    data: [DONE]
    
