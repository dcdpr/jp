when:
  path: /v1/messages
  method: POST
  body: "{\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Test message\"}]}],\"model\":\"claude-3-7-sonnet-latest\",\"max_tokens\":2048,\"stream\":false,\"tool_choice\":{\"type\":\"any\",\"disable_parallel_tool_use\":false},\"tools\":[{\"type\":\"custom\",\"name\":\"run_me\",\"input_schema\":{\"type\":\"object\",\"properties\":{\"foo\":{\"type\":\"string\",\"default\":\"foo\"},\"bar\":{\"type\":[\"string\",\"array\"],\"enum\":[\"foo\",[\"foo\",\"bar\"]],\"items\":{\"type\":\"string\"}}},\"required\":[\"bar\"]},\"cache_control\":{\"type\":\"ephemeral\"}}]}"
then:
  status: 200
  header:
    - name: content-type
      value: application/json
  body: "{\"model\":\"claude-3-7-sonnet-20250219\",\"id\":\"msg_01HmGtfaLtH3xWVPoZdxftzU\",\"type\":\"message\",\"role\":\"assistant\",\"content\":[{\"type\":\"tool_use\",\"id\":\"toolu_01K11NmNvySR6WkRHa9hbV84\",\"name\":\"run_me\",\"input\":{\"bar\":\"foo\"}}],\"stop_reason\":\"tool_use\",\"stop_sequence\":null,\"usage\":{\"input_tokens\":408,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":0,\"cache_creation\":{\"ephemeral_5m_input_tokens\":0,\"ephemeral_1h_input_tokens\":0},\"output_tokens\":38,\"service_tier\":\"standard\"}}"
