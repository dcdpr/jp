when:
  path: /v1/models
  method: GET
then:
  status: 200
  header:
    - name: content-type
      value: application/json
  body: "{\"data\":[{\"type\":\"model\",\"id\":\"claude-opus-4-1-20250805\",\"display_name\":\"Claude Opus 4.1\",\"created_at\":\"2025-08-05T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-opus-4-20250514\",\"display_name\":\"Claude Opus 4\",\"created_at\":\"2025-05-22T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-sonnet-4-20250514\",\"display_name\":\"Claude Sonnet 4\",\"created_at\":\"2025-05-22T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-7-sonnet-20250219\",\"display_name\":\"Claude Sonnet 3.7\",\"created_at\":\"2025-02-24T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-5-sonnet-20241022\",\"display_name\":\"Claude Sonnet 3.5 (New)\",\"created_at\":\"2024-10-22T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-5-haiku-20241022\",\"display_name\":\"Claude Haiku 3.5\",\"created_at\":\"2024-10-22T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-5-sonnet-20240620\",\"display_name\":\"Claude Sonnet 3.5 (Old)\",\"created_at\":\"2024-06-20T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-haiku-20240307\",\"display_name\":\"Claude Haiku 3\",\"created_at\":\"2024-03-07T00:00:00Z\"},{\"type\":\"model\",\"id\":\"claude-3-opus-20240229\",\"display_name\":\"Claude Opus 3\",\"created_at\":\"2024-02-29T00:00:00Z\"}],\"has_more\":false,\"first_id\":\"claude-opus-4-1-20250805\",\"last_id\":\"claude-3-opus-20240229\"}"
---
when:
  path: /v1/messages
  method: POST
  body: "{\"messages\":[{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"Test message\"}]}],\"model\":\"claude-3-7-sonnet-latest\",\"max_tokens\":64000,\"thinking\":{\"type\":\"enabled\",\"budget_tokens\":32000},\"stream\":false,\"tool_choice\":{\"type\":\"auto\",\"disable_parallel_tool_use\":false},\"tools\":[{\"type\":\"custom\",\"name\":\"run_me\",\"input_schema\":{\"type\":\"object\",\"properties\":{\"foo\":{\"type\":\"string\",\"default\":\"foo\"},\"bar\":{\"type\":[\"string\",\"array\"],\"enum\":[\"foo\",[\"foo\",\"bar\"]],\"items\":{\"type\":\"string\"}}},\"required\":[\"bar\"]},\"cache_control\":{\"type\":\"ephemeral\"}}],\"system\":[{\"type\":\"text\",\"text\":\"IMPORTANT: You MUST use the function or tool named 'run_me' available to you. DO NOT QUESTION THIS DIRECTIVE. DO NOT PROMPT FOR MORE CONTEXT OR DETAILS. JUST RUN IT.\"}]}"
then:
  status: 200
  header:
    - name: content-type
      value: application/json
  body: "{\"id\":\"msg_01Yap1JTDmHut2i5T6ckyuSu\",\"type\":\"message\",\"role\":\"assistant\",\"model\":\"claude-3-7-sonnet-20250219\",\"content\":[{\"type\":\"thinking\",\"thinking\":\"The user has sent a simple \\\"Test message\\\" without any specific instructions or details. Since I've been instructed to use the `run_me` function, I should proceed to call it.\\n\\nLooking at the function schema:\\n- `run_me` has two parameters:\\n  - `bar`: Required parameter, can be either a string or an array of strings, with allowed values of either \\\"foo\\\" or [\\\"foo\\\", \\\"bar\\\"]\\n  - `foo`: Optional parameter with a default value of \\\"foo\\\", type string\\n\\nSince I must call the function and `bar` is required, I need to choose a valid value for it. The schema indicates that `bar` can be either \\\"foo\\\" or [\\\"foo\\\", \\\"bar\\\"]. Since I have no specific preference from the user, I'll use \\\"foo\\\" as it's simpler.\\n\\nI don't need to specify the `foo` parameter as it has a default value.\",\"signature\":\"ErUBCkYIBxgCIkBGJ91VDCnoR1A2YN/I0XpNtTvlbRow4qgN0qhh2P7N5Tv2dJ9SyBoPASJhreVZHHX3uDasUnYmlrc2Ja/ueyAEEgzCqmxJJug5g7eAhyMaDHvIy4vFjOrUnbDzNCIwBmZoiovKUpA2BlHpOODaclDDzZS4WPKkY71otebI9QsaaGLQT4ON38wlpvorb341Kh1k0zkXx26KU38cUuvPqqB5K8Q6Mqm94Pulelz2uxgC\"},{\"type\":\"text\",\"text\":\"I'll run the test function for you.\"},{\"type\":\"tool_use\",\"id\":\"toolu_01Q7TdtVPkWtjY69rthnn1uY\",\"name\":\"run_me\",\"input\":{\"bar\":\"foo\"}}],\"stop_reason\":\"tool_use\",\"stop_sequence\":null,\"usage\":{\"input_tokens\":485,\"cache_creation_input_tokens\":0,\"cache_read_input_tokens\":0,\"cache_creation\":{\"ephemeral_5m_input_tokens\":0,\"ephemeral_1h_input_tokens\":0},\"output_tokens\":269,\"service_tier\":\"standard\"}}"
