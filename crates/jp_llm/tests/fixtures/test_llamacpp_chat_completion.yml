when:
  path: /chat/completions
  method: POST
  body: "{\"model\":\"llama3:latest\",\"messages\":[{\"role\":\"user\",\"content\":\"Test message\"}],\"stream\":true,\"tool_choice\":\"auto\"}"
then:
  status: 200
  header:
    - name: content-type
      value: text/event-stream
  body: "data: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"role\":\"assistant\",\"content\":null}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\"Hello\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\"!\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" This\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" is\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" a\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" test\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" message\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" from\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" Q\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\"wen\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\",\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" the\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" large\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" language\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" model\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" created\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" by\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" Alibaba\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" Cloud\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\".\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" How\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" can\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" I\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" assist\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" you\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\" today\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":null,\"index\":0,\"delta\":{\"content\":\"?\"}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\"}\n\ndata: {\"choices\":[{\"finish_reason\":\"stop\",\"index\":0,\"delta\":{}}],\"created\":1758095114,\"id\":\"chatcmpl-UPnsXMSzEpYgzjYNfqDCBdRUFXNs2TZD\",\"model\":\"llama3:latest\",\"system_fingerprint\":\"b5740-fa4a9f2a\",\"object\":\"chat.completion.chunk\",\"usage\":{\"completion_tokens\":28,\"prompt_tokens\":31,\"total_tokens\":59},\"timings\":{\"prompt_n\":31,\"prompt_ms\":124.909,\"prompt_per_token_ms\":4.029322580645162,\"prompt_per_second\":248.18067553178713,\"predicted_n\":28,\"predicted_ms\":498.713,\"predicted_per_token_ms\":17.811178571428574,\"predicted_per_second\":56.14451598414318}}\n\ndata: [DONE]\n\n"
