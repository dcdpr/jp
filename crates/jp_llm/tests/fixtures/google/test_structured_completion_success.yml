when:
  path: "/v1beta/models/gemini-2.5-flash-lite:streamGenerateContent"
  method: POST
  query_param:
    - name: alt
      value: sse
  json_body_str: >-
    {
      "systemInstruction": {
        "parts": [
          {
            "text": "<instruction>\\n  <title>Title Generation</title>\\n  <description>Generate titles to summarize the active conversation</description>\\n  <Items>\\n    <item>Generate exactly 3 titles</item>\\n    <item>Concise, descriptive, factual</item>\\n    <item>Short and to the point, no more than 50 characters</item>\\n    <item>Deliver as a JSON array of strings</item>\\n    <item>DO NOT mention this request to generate titles</item>\\n  </Items>\\n  <examples/>\\n</instruction>"
          }
        ],
        "role": null
      },
      "contents": [
        {
          "parts": [
            {
              "text": "I am testing the structured completion API."
            }
          ],
          "role": "user"
        }
      ],
      "tools": [
        {
          "functionDeclarations": [
            {
              "name": "generate_structured_data",
              "description": "This tool can be used to deliver structured data to the caller. It is NOT intended to GENERATE the requested data, but instead as a structured delivery mechanism. The tool is a no-op implementation in that it allows the assistant to deliver structured data to the user, but the tool will never report back with a result, instead the user can take the structured data from the tool arguments provided. Here is the description for the requested structured data:\\n\\nProvide 3 concise, descriptive factual titles for this conversation.",
              "parameters": null,
              "parametersJsonSchema": {
                "type": "object",
                "properties": {
                  "titles": {
                    "type": "array",
                    "items": {
                      "description": "A concise, descriptive title for the conversation",
                      "type": "string"
                    }
                  }
                },
                "additionalProperties": false,
                "required": [
                  "titles"
                ]
              },
              "response": null
            }
          ]
        }
      ],
      "toolConfig": {
        "functionCallingConfig": {
          "mode": "ANY",
          "allowedFunctionNames": [
            "generate_structured_data"
          ]
        }
      },
      "generationConfig": {
        "maxOutputTokens": 64000,
        "thinkingConfig": {
          "includeThoughts": false,
          "thinkingBudget": null,
          "thinkingLevel": null
        }
      }
    }
then:
  status: 200
  header:
    - name: content-type
      value: text/event-stream
  body: "data: {\"candidates\": [{\"content\": {\"parts\": [{\"functionCall\": {\"name\": \"generate_structured_data\",\"args\": {\"titles\": [\"Test API\",\"Structured Completion\",\"API Testing\"]}}}],\"role\": \"model\"},\"finishReason\": \"STOP\",\"index\": 0,\"finishMessage\": \"Model generated function call(s).\"}],\"usageMetadata\": {\"promptTokenCount\": 274,\"candidatesTokenCount\": 26,\"totalTokenCount\": 300,\"promptTokensDetails\": [{\"modality\": \"TEXT\",\"tokenCount\": 274}]},\"modelVersion\": \"gemini-2.5-flash-lite\",\"responseId\": \"jhA9aceeDYq1nsEPvuDl-AY\"}"
